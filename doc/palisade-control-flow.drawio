<mxfile host="drawio-plugin" modified="2021-07-22T16:20:47.382Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.90 Safari/537.36" etag="MipwSuNm2VU93L3NQQYx" version="14.7.4" type="embed"><diagram id="c2RCb2Oaf2xo_irvAKre" name="Page-1"><mxGraphModel dx="3379" dy="702" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="m4TVbBeVSJsGZxSSa4m9-1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1"><mxGeometry x="960" y="358" width="150" height="282" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1"><mxGeometry x="1550" y="360" width="145" height="550" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1"><mxGeometry x="960" y="640" width="590" height="1020" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-4" value="Token,&lt;br&gt;UserId&lt;br&gt;ResourceId&lt;br&gt;Context" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-26" target="m4TVbBeVSJsGZxSSa4m9-6" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-910" y="455" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-5" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-106" target="m4TVbBeVSJsGZxSSa4m9-9" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-6" value="User Service" style="whiteSpace=wrap;html=1;rounded=0;" parent="1" vertex="1"><mxGeometry x="-968.0899999999999" y="490" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-7" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-9" target="m4TVbBeVSJsGZxSSa4m9-12" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-910" y="1055" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-8" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-9" target="m4TVbBeVSJsGZxSSa4m9-14" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-770" y="950" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-9" value="Does the User &lt;br&gt;exist?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-968.0899999999999" y="750" width="120" height="110" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-10" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-12" target="m4TVbBeVSJsGZxSSa4m9-17" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-910" y="1195" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-11" value="Token,&lt;br&gt;UserId&lt;br&gt;ResourceId&lt;br&gt;Context,&lt;br&gt;User" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-10" vertex="1" connectable="0"><mxGeometry x="-0.1375" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-12" value="Return User Object" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-968.0899999999999" y="960" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-13" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-14" target="m4TVbBeVSJsGZxSSa4m9-18" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-710" y="1055" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-14" value="Create NoSuchUserId exception" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="-1180" y="960" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-16" target="m4TVbBeVSJsGZxSSa4m9-54" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-60.8266666666666" y="668" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-16" value="Policy Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-126.16000000000011" y="518" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-17" value="Write to Kafka&lt;br&gt;&quot;user&quot; topic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-968.0799999999999" y="1180" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-18" value="&lt;div&gt;&lt;span&gt;Write to Kafka&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;error&quot; topic&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-1180" y="1180" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-19" value="UserId, &lt;br&gt;ResourceId,&lt;br&gt;Context" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-21" target="m4TVbBeVSJsGZxSSa4m9-25" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-1410" y="530" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-174" target="m4TVbBeVSJsGZxSSa4m9-156" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="-1250" y="320"/><mxPoint x="1188" y="320"/></Array></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-21" value="1.&lt;br&gt;Client REST Request" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="-1510" y="360" width="200" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-22" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;Stream Marker?&lt;br&gt;&lt;b&gt;Token&lt;/b&gt;&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; font-family: &amp;#34;helvetica&amp;#34; ; display: inline ; float: none&quot;&gt;UserId,&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; font-family: &amp;#34;helvetica&amp;#34; ; display: inline ; float: none&quot;&gt;ResourceId,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; font-family: &amp;#34;helvetica&amp;#34; ; display: inline ; float: none&quot;&gt;Context&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-102" target="m4TVbBeVSJsGZxSSa4m9-27" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.075;entryY=1.033;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-25" target="m4TVbBeVSJsGZxSSa4m9-21" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-24" value="Websocket URL&lt;br&gt;(Results service/token)" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-23" vertex="1" connectable="0"><mxGeometry x="0.0374" y="-2" relative="1" as="geometry"><mxPoint y="-5" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-25" value="Palisade Service adds UUID token to request&amp;nbsp;" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-1470" y="500" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-26" value="&lt;div&gt;Read from Kafka&lt;/div&gt;&lt;div&gt;&quot;request&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-970" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-27" value="&lt;div&gt;Write to Kafka&lt;/div&gt;&lt;div&gt;&quot;request&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-1470" y="942.5" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-28" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-27" target="m4TVbBeVSJsGZxSSa4m9-26" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-370" y="250" as="sourcePoint"/><mxPoint x="-320" y="200" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-30" target="m4TVbBeVSJsGZxSSa4m9-101" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-30" value="Resource Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-515" y="508" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-33" target="m4TVbBeVSJsGZxSSa4m9-41" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-465" y="1118" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-32" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-33" target="m4TVbBeVSJsGZxSSa4m9-35" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-33" value="Is it a valid ResourceId?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-510" y="788" width="110" height="90" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-35" target="m4TVbBeVSJsGZxSSa4m9-42" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-720" y="1108" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-35" value="Create ResourceService exception" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="-700" y="988" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-41" target="m4TVbBeVSJsGZxSSa4m9-46" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-37" value="Token,&lt;br&gt;UserId,&lt;br&gt;ResourceId,&lt;br&gt;Context,&lt;br&gt;User,&lt;br&gt;Leaf Resource" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-36" vertex="1" connectable="0"><mxGeometry x="0.3629" y="2" relative="1" as="geometry"><mxPoint y="-16" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-41" target="m4TVbBeVSJsGZxSSa4m9-46" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-41" target="m4TVbBeVSJsGZxSSa4m9-46" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-40" value="0 or Many LeafResources" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-39" vertex="1" connectable="0"><mxGeometry x="-0.4319" y="1" relative="1" as="geometry"><mxPoint x="-1" y="-34" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-41" value="Get Each LeafResource" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-515" y="988" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-42" value="&lt;div&gt;&lt;span&gt;Write to Kafka&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;error&quot; topic&lt;br&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-700" y="1208" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-43" value="Token,&lt;br&gt;UserId&lt;br&gt;ResourceId&lt;br&gt;Context&lt;br&gt;User" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-44" target="m4TVbBeVSJsGZxSSa4m9-30" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-44" value="&lt;div&gt;Read from Kafka&lt;/div&gt;&lt;div&gt;&quot;user&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-515" y="358" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-45" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-17" target="m4TVbBeVSJsGZxSSa4m9-44" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-610" y="890" as="sourcePoint"/><mxPoint x="-560" y="840" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-46" value="&lt;div&gt;Write to Kafka&lt;/div&gt;&lt;div&gt;&quot;resource&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-514.91" y="1208" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-48" target="m4TVbBeVSJsGZxSSa4m9-16" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-48" value="Read from Kafka&lt;br&gt;&lt;div&gt;&quot;resource&quot; topic&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-124.25000000000003" y="358" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-49" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.001;entryY=0.383;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-46" target="m4TVbBeVSJsGZxSSa4m9-48" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-310" y="1310" as="sourcePoint"/><mxPoint x="95" y="750" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-50" value="Not Redacted" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-57" target="m4TVbBeVSJsGZxSSa4m9-60" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-66.15000000000009" y="973" as="sourcePoint"/><mxPoint x="-65.98000000000002" y="1078" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-51" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-54" target="m4TVbBeVSJsGZxSSa4m9-63" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-66.16500000000019" y="798" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-54" target="m4TVbBeVSJsGZxSSa4m9-55" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-53" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-52" vertex="1" connectable="0"><mxGeometry x="-0.6743" y="3" relative="1" as="geometry"><mxPoint x="-4.93" y="9.25" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-54" value="Is it a &lt;br&gt;Stream Marker?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-128.08" y="613" width="123.83" height="120" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-55" value="&lt;div&gt;Write to Kafka&lt;/div&gt;&lt;div&gt;&quot;rule&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-126.08000000000007" y="1280" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-56" value="Redacted" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-57" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="71.92000000000007" y="963" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-57" value="&lt;span&gt;Apply &lt;br&gt;Coarse Grain (resource level) rules&lt;/span&gt;" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-121.15000000000006" y="908" width="110" height="110" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-58" value="" style="shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;" parent="1" vertex="1"><mxGeometry x="71.92999999999998" y="948" width="30" height="30" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-59" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;Token,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;UserId,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;ResourceId,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;Context,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;User,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;Leaf Resource,&lt;br&gt;&lt;/span&gt;Record Rules" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="m4TVbBeVSJsGZxSSa4m9-55" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-64.75" y="1158" as="sourcePoint"/><mxPoint x="-64.74999999999994" y="1278" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-60" value="Attach Rules to message" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-126.16000000000005" y="1098" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-61" value="No&amp;nbsp;resource level rules&lt;br&gt;or&lt;br&gt;record Rules" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-63" target="m4TVbBeVSJsGZxSSa4m9-65" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-62" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-63" target="m4TVbBeVSJsGZxSSa4m9-57" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-63" value="Get Rules" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-106.16999999999999" y="798" width="80" height="80" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-64" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-65" target="m4TVbBeVSJsGZxSSa4m9-66" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="150.01" y="968" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-65" value="Create NoPolicyException" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="-280" y="1098" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-66" value="&lt;div&gt;&lt;span&gt;Write to Kafka&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&quot;error&quot; topic&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;/span&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-280" y="1278" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-68" target="m4TVbBeVSJsGZxSSa4m9-79" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-68" value="Attribute Masking Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="369.99999999999994" y="540" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-71" target="m4TVbBeVSJsGZxSSa4m9-68" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-70" value="&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;Token,&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;UserId,&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;ResourceId,&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;Context,&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;User,&lt;/span&gt;&lt;br style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;&lt;span style=&quot;font-family: &amp;#34;helvetica&amp;#34;&quot;&gt;Leaf Resource,&lt;br&gt;Record Rules&lt;br&gt;&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-69" vertex="1" connectable="0"><mxGeometry x="-0.2333" y="-3" relative="1" as="geometry"><mxPoint y="9" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-71" value="&lt;div&gt;Read from Kafka&lt;/div&gt;&lt;div&gt;&quot;rule&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="370" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-72" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-55" target="m4TVbBeVSJsGZxSSa4m9-71" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-70" y="1240" as="sourcePoint"/><mxPoint x="208.94999999999936" y="542.98" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-75" target="m4TVbBeVSJsGZxSSa4m9-121" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-74" value="LeafResource" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-73" vertex="1" connectable="0"><mxGeometry x="0.2509" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-75" value="Authorised Requests" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"><mxGeometry x="-1815" y="710" width="70" height="65" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-79" target="m4TVbBeVSJsGZxSSa4m9-80" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="250" y="695"/><mxPoint x="250" y="1312"/></Array></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-79" target="m4TVbBeVSJsGZxSSa4m9-116" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-78" value="Token,&lt;br&gt;LeafResourceId,&lt;br&gt;User&lt;br&gt;LeafResource,&lt;br&gt;Record Rules,&lt;br&gt;Context" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-77" vertex="1" connectable="0"><mxGeometry x="-0.2556" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-79" value="Is it a &lt;br&gt;Stream Marker?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="366.16999999999996" y="635" width="123.83" height="120" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-80" value="&lt;div&gt;Write to Kafka&lt;/div&gt;&lt;div&gt;&quot;masked-resource&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="366.17" y="1282" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-83" target="m4TVbBeVSJsGZxSSa4m9-80" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-82" value="Token,&lt;br&gt;(Masked) LeafResource,&lt;br&gt;UserId,&lt;br&gt;ResourceId,&lt;br&gt;Context" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-81" vertex="1" connectable="0"><mxGeometry x="-0.2143" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-83" value="Redact Additional Resource Metadata" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="368.17" y="1082" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-84" value="Token" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-85" target="m4TVbBeVSJsGZxSSa4m9-88" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-85" value="&lt;div&gt;Read from Kafka&lt;/div&gt;&lt;div&gt;&quot;masked-resource&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="640" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-86" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-80" target="m4TVbBeVSJsGZxSSa4m9-85" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="410.0000000000001" y="1050" as="sourcePoint"/><mxPoint x="786.16" y="230" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-87" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-88" target="m4TVbBeVSJsGZxSSa4m9-90" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-88" value="Topic Offset Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="640" y="480" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-89" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.333;entryY=0.4;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-90" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="809.9899999999998" y="645" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-90" value="Is it a &lt;br&gt;start of stream?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="638.09" y="585" width="123.83" height="120" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-91" value="&lt;div&gt;Write to Kafka&lt;/div&gt;&lt;div&gt;&quot;masked-resource-offset&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="640" y="835" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-92" value="&lt;br&gt;&lt;br&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-90" target="m4TVbBeVSJsGZxSSa4m9-91" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="700" y="880" as="targetPoint"/><mxPoint x="700" y="840" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-93" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-92" vertex="1" connectable="0"><mxGeometry x="-0.7231" y="-2" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-94" value="Token&amp;nbsp;&lt;br&gt;Commit Offset" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-92" vertex="1" connectable="0"><mxGeometry x="0.1538" y="3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-95" value="Token&lt;br&gt;Commit Offset" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-96" target="m4TVbBeVSJsGZxSSa4m9-164" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1034" y="510" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-96" value="&lt;div&gt;Read from Kafka&lt;/div&gt;&lt;div&gt;&quot;masked-resource-offset&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="974" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-97" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-91" target="m4TVbBeVSJsGZxSSa4m9-96" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="590" y="840" as="sourcePoint"/><mxPoint x="640" y="790" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-98" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-101" target="m4TVbBeVSJsGZxSSa4m9-33" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-99" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-101" target="m4TVbBeVSJsGZxSSa4m9-46" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-100" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-99" vertex="1" connectable="0"><mxGeometry x="-0.639" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-101" value="Is it a &lt;br&gt;Stream Marker?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-516.91" y="603" width="123.83" height="120" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-102" value="Append and Prepend Start and End of Stream marker" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-1470" y="700" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-103" value="&lt;b&gt;Token&lt;/b&gt;&lt;br&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;UserId,&lt;span&gt;&amp;nbsp;&lt;/span&gt;&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;ResourceId,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;Context&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-25" target="m4TVbBeVSJsGZxSSa4m9-102" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-1410" y="560" as="sourcePoint"/><mxPoint x="-1410" y="765" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-106" target="m4TVbBeVSJsGZxSSa4m9-17" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-105" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-104" vertex="1" connectable="0"><mxGeometry x="-0.6615" y="-4" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-106" value="Is it a &lt;br&gt;Stream Marker?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-970" y="575" width="123.83" height="120" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-107" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-6" target="m4TVbBeVSJsGZxSSa4m9-106" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-910" y="615" as="sourcePoint"/><mxPoint x="-910" y="895" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-108" value="" style="endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-80" target="m4TVbBeVSJsGZxSSa4m9-129" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="590" y="840" as="sourcePoint"/><mxPoint x="640" y="790" as="targetPoint"/><Array as="points"><mxPoint x="640" y="1120"/><mxPoint x="920" y="1120"/></Array></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-109" value="&lt;div&gt;Start from &lt;br&gt;&lt;/div&gt;&lt;div&gt;Commit Offset&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-108" vertex="1" connectable="0"><mxGeometry x="0.8582" y="3" relative="1" as="geometry"><mxPoint x="-89.38" y="80.33" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-112" target="m4TVbBeVSJsGZxSSa4m9-75" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-111" value="Token&lt;br&gt;LeafResourceId" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-110" vertex="1" connectable="0"><mxGeometry x="-0.2947" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-112" value="Data Service" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-1840" y="500" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-114" target="m4TVbBeVSJsGZxSSa4m9-112" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-114" value="&lt;div&gt;3.&lt;/div&gt;&lt;div&gt;Client REST Request&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="-1630" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-116" target="m4TVbBeVSJsGZxSSa4m9-83" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-116" value="Authorised Requests" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"><mxGeometry x="393.09000000000003" y="902.78" width="70" height="65" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-117" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-75" target="m4TVbBeVSJsGZxSSa4m9-125" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="-1780" y="880" as="targetPoint"/><mxPoint x="-1780" y="815" as="sourcePoint"/><Array as="points"><mxPoint x="-1780" y="830"/><mxPoint x="-1860" y="830"/><mxPoint x="-1860" y="1210"/></Array></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-118" value="&lt;span style=&quot;font-size: 12px&quot;&gt;User, &lt;br&gt;LeafResource, &lt;br&gt;Record Rules, &lt;br&gt;Context&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-117" vertex="1" connectable="0"><mxGeometry x="0.159" y="3" relative="1" as="geometry"><mxPoint y="75" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-119" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-121" target="m4TVbBeVSJsGZxSSa4m9-171" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-120" value="Data" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-119" vertex="1" connectable="0"><mxGeometry x="-0.3943" y="-3" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-121" value="Data Store" style="shape=datastore;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"><mxGeometry x="-1815" y="940" width="70" height="65" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-125" target="m4TVbBeVSJsGZxSSa4m9-114" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-123" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-171" target="m4TVbBeVSJsGZxSSa4m9-128" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-124" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-123" vertex="1" connectable="0"><mxGeometry x="-0.5" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-125" value="Apply Record level rules" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-1840" y="1180" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-126" value="Token,&lt;br&gt;UserId,&lt;br&gt;ResourceId,&lt;br&gt;Context,&lt;br&gt;User,&lt;br&gt;Leaf Resource" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="1" vertex="1" connectable="0"><mxGeometry x="-66.17361251559672" y="461.0002497742172" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-127" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-128" target="m4TVbBeVSJsGZxSSa4m9-172" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-128" value="Write to Kafka&lt;br&gt;&quot;success&quot; topic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="-1700" y="1072" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-129" value="&lt;div&gt;&lt;div&gt;Read from Kafka&lt;/div&gt;&lt;div&gt;&quot;masked-resource&quot; topic&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1107.09" y="910.0013793103449" width="120" height="62.58620689655173" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-130" value="Send to Websocket" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1109" y="1580.0037931034483" width="120" height="62.58620689655173" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-131" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-132" target="m4TVbBeVSJsGZxSSa4m9-149" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1409" y="1207" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-132" value="End of Stream?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1438" y="1164.998275862069" width="80" height="83.44827586206897" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-133" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;Token,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;UserId,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;LeafResourceId,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;Context,&lt;/span&gt;&lt;br style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px&quot;&gt;&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 11px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(255 , 255 , 255) ; display: inline ; float: none&quot;&gt;ResourceId&lt;/span&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-135" target="m4TVbBeVSJsGZxSSa4m9-142" edge="1"><mxGeometry x="0.3332" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-134" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-133" vertex="1" connectable="0"><mxGeometry x="0.0007" y="58" relative="1" as="geometry"><mxPoint x="-58" y="-58" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-135" value="Is it a &lt;br&gt;Stream Marker?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1107.0899999999997" y="1144.9962068965517" width="123.83" height="125.17241379310346" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-136" value="Filter By Token" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1107.0900000000001" y="1059.9968965517241" width="120" height="62.58620689655173" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-137" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-129" target="m4TVbBeVSJsGZxSSa4m9-136" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-138" value="Token,&lt;br&gt;LeafResource,&lt;br&gt;UserId,&lt;br&gt;ResourceId,&lt;br&gt;Context" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-137" vertex="1" connectable="0"><mxGeometry x="-0.2507" y="1" relative="1" as="geometry"><mxPoint y="6" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-136" target="m4TVbBeVSJsGZxSSa4m9-135" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1169" y="1190.177467997004" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-140" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-142" target="m4TVbBeVSJsGZxSSa4m9-130" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-141" value="If send to audit success&lt;br&gt;was successful then:&lt;br&gt;Masked LeafResource" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-140" vertex="1" connectable="0"><mxGeometry x="-0.1899" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-142" value="&lt;div&gt;Write success to Kafka&lt;/div&gt;&lt;div&gt;&quot;success&quot; topic&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="1109" y="1407.4137931034481" width="120" height="62.58620689655173" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-143" value="There is a read timeout here&amp;nbsp;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1"><mxGeometry x="1039" y="1269.566896551724" width="100" height="20.862068965517242" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-144" value="If upsert into redis is successful,&lt;br&gt;&amp;nbsp;then redact" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1"><mxGeometry x="250" y="1005" width="190" height="30" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-145" value="Close Websocket" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1418" y="1578.8" width="120" height="63.79" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-148" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1189.0100000000002" y="640" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-147" value="&lt;div&gt;Token&lt;/div&gt;&lt;div&gt;Websocket&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-146" vertex="1" connectable="0"><mxGeometry x="0.0284" y="14" relative="1" as="geometry"><mxPoint x="-14" y="-9" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-148" value="Create Websocket(s)" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1128" y="510" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-149" value="" style="shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;" parent="1" vertex="1"><mxGeometry x="1463" y="1082.0000000000002" width="30" height="30" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-150" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-152" target="m4TVbBeVSJsGZxSSa4m9-159" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-151" value="&lt;div&gt;Token&lt;/div&gt;&lt;div&gt;Exception&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-150" vertex="1" connectable="0"><mxGeometry x="-0.2057" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-152" value="Read from Kafka&lt;br&gt;&quot;error&quot; topic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"><mxGeometry x="1561" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-153" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;startArrow=classic;startFill=1;endArrow=none;endFill=0;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-158" target="m4TVbBeVSJsGZxSSa4m9-164" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1050.7599999999993" y="591.6799999999998" as="targetPoint"/><Array as="points"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-154" value="&lt;div&gt;Token&lt;/div&gt;&lt;div&gt;Commit Offset&lt;/div&gt;&lt;div&gt;(Default &quot;now&quot;)&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-153" vertex="1" connectable="0"><mxGeometry x="-0.1401" y="-24" relative="1" as="geometry"><mxPoint x="-6.09" y="-36" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-155" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-156" target="m4TVbBeVSJsGZxSSa4m9-148" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-156" value="Client" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;" parent="1" vertex="1"><mxGeometry x="1173" y="350" width="30" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-157" value="Token&amp;nbsp;&lt;br&gt;&lt;div&gt;Commit Offset&lt;/div&gt;&lt;div&gt;Websocket&lt;br&gt;&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-161" target="m4TVbBeVSJsGZxSSa4m9-129" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-158" value="ProcessResources&lt;span style=&quot;color: rgba(0 , 0 , 0 , 0) ; font-family: monospace ; font-size: 0px&quot;&gt;%3CmxGraphModel%3E%3Croot%3E%3CmxCell%20id%3D%220%22%2F%3E%3CmxCell%20id%3D%221%22%20parent%3D%220%22%2F%3E%3CmxCell%20id%3D%222%22%20value%3D%22Start%20of%20Resources%22%20style%3D%22shape%3Dcylinder2%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BboundedLbl%3D1%3BbackgroundOutline%3D1%3Bsize%3D15%3B%22%20vertex%3D%221%22%20parent%3D%221%22%3E%3CmxGeometry%20x%3D%221100%22%20y%3D%22510%22%20width%3D%2280%22%20height%3D%2280%22%20as%3D%22geometry%22%2F%3E%3C%2FmxCell%3E%3C%2Froot%3E%3C%2FmxGraphModel%3E&lt;/span&gt;" style="whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1107.09" y="643" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-159" value="Create Error Message&lt;br&gt;(UserId, ResourceId or Context Errors in future)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1"><mxGeometry x="1561" y="505" width="120" height="70" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-160" value="&lt;div&gt;Token&lt;br&gt;&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-156" target="m4TVbBeVSJsGZxSSa4m9-148" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1127.04" y="479.99999999999994" as="targetPoint"/><mxPoint x="1152" y="391" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-161" value="Send &quot;early&quot; errors to Websocket" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1"><mxGeometry x="1107.09" y="777" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-162" value="Token&amp;nbsp;&lt;br&gt;&lt;div&gt;Commit Offset&lt;/div&gt;&lt;div&gt;Websocket&lt;br&gt;&lt;/div&gt;" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-158" target="m4TVbBeVSJsGZxSSa4m9-161" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1166.0900000000001" y="695" as="sourcePoint"/><mxPoint x="1168.0689655172418" y="910.0013793103449" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-163" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-132" target="m4TVbBeVSJsGZxSSa4m9-145" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1410" y="1326" as="targetPoint"/><mxPoint x="1410" y="1248.446551724138" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-164" value="&lt;div&gt;Start of Resources&lt;/div&gt;" style="shape=datastore;whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"><mxGeometry x="999.5" y="510" width="69" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-165" value="&lt;div&gt;Notify Actor&lt;/div&gt;&lt;div&gt;for Token&lt;/div&gt;&lt;div&gt;if Exists&lt;br&gt;&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1"><mxGeometry x="1550" y="817.78" width="125" height="80" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-166" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.566;entryY=0.09;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-177" target="m4TVbBeVSJsGZxSSa4m9-165" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1621" y="575" as="sourcePoint"/><mxPoint x="1619" y="640" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-167" value="&lt;div&gt;Token&lt;/div&gt;&lt;div&gt;Error Message&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-166" vertex="1" connectable="0"><mxGeometry x="-0.2248" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-168" value="&lt;div&gt;Store whether actor&lt;/div&gt;&lt;div&gt; has &quot;late&quot; resources&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1"><mxGeometry x="1259" y="822.78" width="159" height="80" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-169" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-171" target="m4TVbBeVSJsGZxSSa4m9-125" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-170" value="No" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-169" vertex="1" connectable="0"><mxGeometry x="0.0476" y="7" relative="1" as="geometry"><mxPoint x="-8" y="-7" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-171" value="If EOF" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-1820" y="1062" width="80" height="80" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-172" value="Send EOF to client and close websocket" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="-1700" y="942.5" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-173" value="" style="endArrow=classic;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;rounded=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-172" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="-1050" y="880" as="sourcePoint"/><mxPoint x="-1600" y="420" as="targetPoint"/><Array as="points"><mxPoint x="-1640" y="880"/><mxPoint x="-1600" y="880"/><mxPoint x="-1600" y="720"/></Array></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-174" value="&lt;div&gt;2.&lt;br&gt;&lt;/div&gt;&lt;div&gt;Client REST Request&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1"><mxGeometry x="-1310" y="360" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-175" value="" style="shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;" parent="1" vertex="1"><mxGeometry x="800" y="630" width="30" height="30" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-176" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-177" target="m4TVbBeVSJsGZxSSa4m9-161" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-177" value="Error Messages" style="shape=datastore;whiteSpace=wrap;html=1;rounded=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"><mxGeometry x="1582.5" y="630" width="70" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-178" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.566;entryY=0.09;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-159" target="m4TVbBeVSJsGZxSSa4m9-177" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1621" y="575" as="sourcePoint"/><mxPoint x="1621.75" y="732.2" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-179" value="&lt;div&gt;Token&lt;/div&gt;&lt;div&gt;Error Message&lt;br&gt;&lt;/div&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-178" vertex="1" connectable="0"><mxGeometry x="-0.2248" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-180" value="Actor &quot;$token&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1"><mxGeometry x="1279" y="620" width="141" height="20" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-181" value="Actor &quot;ErrorReader&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1"><mxGeometry x="1554" y="340" width="141" height="20" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-182" value="Actor &quot;OffsetReader&quot;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1"><mxGeometry x="964.5" y="340" width="141" height="20" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-183" value="&lt;div&gt;Send &quot;late&quot; errors to Websocket&lt;br&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1"><mxGeometry x="1285.5" y="967.78" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-184" value="" style="shape=flexArrow;endArrow=classic;html=1;entryX=0.875;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#ffffff;exitX=0.16;exitY=0.55;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-165" target="m4TVbBeVSJsGZxSSa4m9-168" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1171.88" y="610" as="sourcePoint"/><mxPoint x="1450.005" y="862.78" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-185" value="" style="endArrow=classic;html=1;fillColor=#ffffff;exitX=0.55;exitY=0.95;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-168" target="m4TVbBeVSJsGZxSSa4m9-183" edge="1"><mxGeometry width="50" height="50" relative="1" as="geometry"><mxPoint x="1240" y="820" as="sourcePoint"/><mxPoint x="1290" y="770" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-186" value="No" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-187" target="m4TVbBeVSJsGZxSSa4m9-132" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1414" y="1206"/></Array></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-187" value="Start of Stream followed immediately by End of Stream?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1269" y="1146" width="120" height="120" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-188" value="Yes" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-135" target="m4TVbBeVSJsGZxSSa4m9-187" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1230.9026023966944" y="1207.6" as="sourcePoint"/><mxPoint x="1370" y="1206.7224137931034" as="targetPoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-189" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" target="m4TVbBeVSJsGZxSSa4m9-193" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1329" y="1330"/><mxPoint x="1329" y="1330"/></Array><mxPoint x="1329" y="1266" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-190" value="Yes" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-189" vertex="1" connectable="0"><mxGeometry x="-0.0948" y="-4" relative="1" as="geometry"><mxPoint x="3" y="-40" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-191" value="This indicates all resources&lt;br&gt;have been redacted and therefore&lt;br&gt;the business logic here is to return an exception&lt;br&gt;as if the data never existed" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="m4TVbBeVSJsGZxSSa4m9-189" vertex="1" connectable="0"><mxGeometry x="-0.6606" y="-2" relative="1" as="geometry"><mxPoint y="40" as="offset"/></mxGeometry></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-192" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="m4TVbBeVSJsGZxSSa4m9-193" target="m4TVbBeVSJsGZxSSa4m9-194" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-193" value="Create NoSuchResource AuditErrorMessage" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" parent="1" vertex="1"><mxGeometry x="1269" y="1407.41" width="120" height="60" as="geometry"/></mxCell><mxCell id="m4TVbBeVSJsGZxSSa4m9-194" value="Send &quot;NoSuchResource&quot; exception to error queue" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1269" y="1578.8000000000002" width="120" height="60" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>